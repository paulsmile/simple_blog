{% extends "base.html" %}
{% block title %}CJYFFF的简单BLOG{% endblock %}

{% block body %}
<div class="container">
  <div id="content" class="row-fluid">
    <div class="span9 main">
      {% for post in posts_of_page %}		 
        {# The code below is redirect to the url named 'detail_blog', and send 'post.id' to this url. #}
        <h2 ><a href="{% url 'detail_blog' post.id %}"><small>{{ post.title }}</small></a></h2>
        <p>作者：{{ post.author }}&nbsp;&nbsp;发表时间：{{ post.timestamp|date:"Y年m月j日 f" }}</p>
        <div class="post_content">
        {% if post.summary %}
          <p class="text-indent">文章简介：&nbsp;{{ post.summary|truncatechars:100 }}</p>
        {% endif %}
        </div>
        <p class="text-indent"><a  href="{% url 'detail_blog' post.id %}">{阅览全文}</a></p>
        <p class="page-header"></p>
      {% endfor %}
      <div class="posts_of_page">
      <span class="paging">
      {% if posts_of_page.has_previous %}
        <a href="?page={{ posts_of_page.previous_page_number }}"><font color="#0000cd">&#9664;上一页</font></a>
      {% endif %}
      <span>
        {% for num in page_range %}
        <a href="?page={{ num }}">
          {% ifequal num posts_of_page.number %}
          <font color="#0000cd">{{ num }}</font>
          {% else %}
          <font color="#3a87ad">{{ num }}</font>
          {% endifequal %}
        </a>
        {% endfor %}
      </span>
      {% if posts_of_page.has_next %}
        <a href="?page={{ posts_of_page.next_page_number }}"><font color="#0000cd">下一页&#9654;</font></a>
      {% endif %}
      </span>
      </div>
    </div>
    <div class="span3 sidebar">
      <div class="alert alert-info">      
        <div>	      
          <h3 class="page-header">关于博主</h3>
          <p><b>一个在地球online苦苦练级的程序猿，武器是python，js和c。
          来自广东工业大学。求各位大牛带带小的刷这个副本。</b></p>
          <br>      
          <p><b>联系我：</b></p>
          <p><b>邮箱: </b>cjyfff#163.com</p>
          <p><b>QQ: </b>631127458</p>
        </div>
        <br>
      <div>
        <h4 class="page-header">我的标签</h4>
        <br>
        <ul>
          {% for k, v in tag_list.items %}
            <li>
              <p><a href="{% url 'tag_page' k %}">{{ k }}: ({{ v }})</a></p>
            </li>
          {% endfor %}
      </ul>
      <br>
      </div>
      <div>
        <h4 class="page-header">最新评论</h4>
        <br>
        <ul>
          {% for all_comment in all_comments_list %}
            <li>
            <p><b><a href="{% url 'detail_blog' all_comment.4 %}">
            {{ all_comment.1 }}&nbsp;&nbsp;回复：{{ all_comment.3 }}：</a></b></p>
            <p>{{ all_comment.2 }}</p>
            </li>
          {% endfor %}
        </ul>
        <br>
      </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}