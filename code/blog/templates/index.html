{% extends "base.html" %}

{% block title %}CJYFFF的简单BLOG{% endblock %}

{% block body %}
<div class="container">
    <h1 class="page-header">CJYFFF的简单BLOG<small>&nbsp;&nbsp;powered by Django</small></h1>
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
            <ul class="nav pull-right">
                <li><a href="{% url 'RSS_url' %}">
                    <img src="http://127.0.0.1:8000/media/rss.jpg" width="20" height="20"/>
                    RSS</a>
                </li>                
                <li><a href="{% url 'login' %}">登录</a></li>
                <li class="divider-vertical"></li>
                <li><a href="{% url 'logout' %}">注销</a></li>
            </ul>
            </div>
        </div>
    </div>
{% load pagination_tags %}
{% autopaginate posts 2 %}

{% for post in posts %}
    {# 下面语句是要重定向到detail_blog这个url，并且把post.id传给这个url #}
    <h2 class="page-header"><a href="{% url 'detail_blog' post.id %}"><small>{{ post.title }}</small></a></h2>
    
    {% if post.summary %}
        <p>文章简介：</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ post.summary|truncatechars:200 }}</p>
    {% endif %}
    
    <a href="{% url 'detail_blog' post.id %}">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{阅览全文}</a></p>
    <p>作者：{{ post.author }}&nbsp;&nbsp;发表时间：{{ post.timestamp }}</p>
{% endfor %}

{% paginate %}

</div>
{% endblock %}